(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"ct+p":function(t,e,n){"use strict";n.r(e),n.d(e,"HomeModule",function(){return u});var o=n("ofXK"),s=n("tyNb"),c=n("fXoL"),r=n("tk/3");let a=(()=>{class t{constructor(t){this.httpService=t}getModifedWorkspaces(){const t={method:"GET",url:"https://api.powerbi.com/v1.0/myorg/admin/workspaces/modified",headers:{"Content-Type":"application/json",authorization:""}};return this.httpService.get(t.url,t)}getWorkspacesLineage(t){const e={method:"POST",url:"https://api.powerbi.com/v1.0/myorg/admin/workspaces/getInfo?lineage=true",headers:{authorization:""}};return this.httpService.post(e.url,{workspaces:t},e)}getWorkspacesScanStatus(t){const e={method:"GET",url:"https://api.powerbi.com/v1.0/myorg/admin/workspaces/scanStatus/"+t,headers:{"Content-Type":"application/json",authorization:""}};return this.httpService.get(e.url,e)}getWorkspacesScanResult(t){const e={method:"GET",url:"https://api.powerbi.com/v1.0/myorg/admin/workspaces/scanResult/"+t,headers:{"Content-Type":"application/json",authorization:""}};return this.httpService.get(e.url,e)}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(r.a))},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac}),t})();const i=[{path:"",component:(()=>{class t{constructor(t){this.proxy=t}ngOnInit(){}startScan(){this.proxy.getModifedWorkspaces().subscribe(t=>{console.log(t);const e=t.map(t=>t.Id);this.proxy.getWorkspacesLineage(e).subscribe(t=>{this.scanInfo=t})})}getStatus(){this.proxy.getWorkspacesScanStatus(this.scanInfo.id).subscribe(t=>{console.log(t),this.scanInfo=t})}downloadFiles(){"Succeeded"===this.scanInfo.status&&this.proxy.getWorkspacesScanResult(this.scanInfo.id).subscribe(t=>{console.log(t),this.saveAsFile(JSON.stringify(t),"workspace.JSON","text/plain;charset=utf-8")})}saveAsFile(t,e,n){try{const o=new Blob([t],{type:n});saveAs(o,e)}catch(o){window.open("data:"+n+","+encodeURIComponent(t),"_blank","")}}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(a))},t.\u0275cmp=c.Db({type:t,selectors:[["home-container"]],decls:9,vars:1,consts:[[1,"container"],[3,"click"]],template:function(t,e){1&t&&(c.Mb(0,"section",0),c.Mb(1,"p"),c.hc(2),c.Lb(),c.Mb(3,"button",1),c.Tb("click",function(){return e.startScan()}),c.hc(4,"Start scan"),c.Lb(),c.Mb(5,"button",1),c.Tb("click",function(){return e.getStatus()}),c.hc(6,"Status"),c.Lb(),c.Mb(7,"button",1),c.Tb("click",function(){return e.downloadFiles()}),c.hc(8,"download"),c.Lb(),c.Lb()),2&t&&(c.zb(2),c.ic("Scan status: ",null==e.scanInfo?null:e.scanInfo.status,""))},styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:block;height:calc(100%);height:-webkit-calc(100%);overflow:hidden}"]}),t})()}];let p=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[s.b.forChild(i)],s.b]}),t})(),u=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},providers:[a],imports:[[o.b,p]]}),t})()}}]);